<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>POãƒ»TORO å…¬å¼ãƒãƒ¼ã‚¿ãƒ«</title>

<style>
:root{--ink:#333;--card:#ffffffcc;--shadow:0 10px 30px rgba(0,0,0,.12)}
html,body{margin:0;font-family:"Noto Sans JP",sans-serif;background:linear-gradient(135deg,#f6b7d2,#a9d6f7);background-attachment:fixed}
img{max-width:100%;display:block}
.container{width:min(1100px,92vw);margin:0 auto}
section{padding:34px 0}
.sec-title{font-weight:900;font-size:1.3rem;margin:0 0 14px}
/* STATUSï¼ˆå¤±æ•—/0ä»¶æ™‚ã®ã¿è¡¨ç¤ºï¼‰ */
#newsStatus,#eventsStatus,#scheduleStatus{
  display:none!important;color:#d63384;text-align:center;
  margin-top:12px;font-weight:700;font-size:.9rem
}
.card{background:#fff;border-radius:18px;box-shadow:var(--shadow);overflow:hidden}
.card .body{padding:12px}
.grid{display:grid;gap:16px}
.grid.cols-3{grid-template-columns:repeat(3,1fr)}
</style>
</head>

<body>
<header style="position:sticky;top:0;background:#ffffffcc;padding:12px 0;backdrop-filter:blur(6px)">
  <div class="container" style="display:flex;justify-content:space-between;align-items:center;font-weight:900">
    <div>concept cafe POãƒ»TORO</div>
    <nav style="display:flex;gap:12px">
      <a href="#news">ãŠçŸ¥ã‚‰ã›</a>
      <a href="#events">ã‚¤ãƒ™ãƒ³ãƒˆ</a>
      <a href="#maids">ãƒ¡ã‚¤ãƒ‰</a>
      <a href="#schedule">å–¶æ¥­æ—¥</a>
    </nav>
  </div>
</header>

<main>

<!-- HERO -->
<section class="hero">
  <div class="container" style="display:grid;grid-template-columns:1fr 1fr;gap:24px;align-items:center">
    <div>
      <h1 style="font-size:2rem;font-weight:900;margin:.3em 0">ã‚ˆã†ã“ãâ™¡ POãƒ»TOROã¸</h1>
      <p>ã‚¤ãƒ™ãƒ³ãƒˆãƒ»ãƒ¡ã‚¤ãƒ‰ã•ã‚“ç´¹ä»‹ãƒ»ã‚²ãƒ¼ãƒ ã¸ã®å…¥ã‚Šå£ã§ã™ï¼</p>
    </div>
    <div class="card">
      <a href="https://x.com/po_toro" target="_blank" rel="noopener">
        <img src="img/potro_twi.jpg" alt="POãƒ»TORO ã‚­ãƒ¼ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ï¼ˆã‚¯ãƒªãƒƒã‚¯ã§Xã¸ï¼‰">
      </a>
    </div>
  </div>
</section>

<!-- ğŸ—ï¸ ãŠçŸ¥ã‚‰ã› -->
<section id="news">
 <div class="container">
  <h2 class="sec-title">ğŸ—ï¸ ãŠçŸ¥ã‚‰ã›</h2>
  <ul id="newsList"></ul>
  <div id="newsStatus"></div>
 </div>
</section>

<!-- ğŸ‰ ã‚¤ãƒ™ãƒ³ãƒˆ -->
<section id="events">
 <div class="container">
  <h2 class="sec-title">ğŸ‰ ã‚¤ãƒ™ãƒ³ãƒˆ</h2>
  <div class="grid cols-3" id="eventsGrid"></div>
  <div id="eventsStatus"></div>
 </div>
</section>

<!-- ğŸ‘‘ ãƒ¡ã‚¤ãƒ‰ -->
<section id="maids">
 <div class="container">
  <h2 class="sec-title">ğŸ‘‘ ãƒ¡ã‚¤ãƒ‰ã•ã‚“ç´¹ä»‹</h2>
  <div class="grid cols-3">
    <article class="card">
      <img src="img/potro_cafe_maiddemo_final.png" alt="ãƒ¡ã‚¤ãƒ‰ç´¹ä»‹">
      <div class="body">
        <h3>ãƒ¡ã‚¤ãƒ‰ã•ã‚“ä¸€è¦§</h3>
        <a href="https://potoro1001.github.io/potoro-profile-public/" target="_blank" rel="noopener">â†’ ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã¸</a>
      </div>
    </article>
  </div>
 </div>
</section>

<!-- ğŸ“… ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ« -->
<section id="schedule">
 <div class="container">
   <h2 class="sec-title">ğŸ“… å–¶æ¥­ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆç›´è¿‘7æ—¥ï¼‰</h2>
   <table style="width:100%;border-collapse:collapse;background:#fff;border-radius:12px;overflow:hidden">
     <thead><tr><th>æ—¥ä»˜</th><th>å–¶æ¥­æ™‚é–“</th><th>ãƒ¡ãƒ¢</th></tr></thead>
     <tbody id="scheduleBody"></tbody>
   </table>
   <div id="scheduleStatus"></div>
 </div>
</section>

</main>



<script>
// âœ… CSVè¨­å®š
const CONFIG = {
  news:    "https://docs.google.com/spreadsheets/d/1rqajpwmrRffVgtfBS7fgvgyrCS7YgfkW5RyedstpDnw/export?format=csv&gid=1650494358",
  events:  "https://docs.google.com/spreadsheets/d/1rqajpwmrRffVgtfBS7fgvgyrCS7YgfkW5RyedstpDnw/export?format=csv&gid=365949763",
  schedule:"https://docs.google.com/spreadsheets/d/1rqajpwmrRffVgtfBS7fgvgyrCS7YgfkW5RyedstpDnw/export?format=csv&gid=1276825118"
};

// âœ… æº–å‚™ä¸­ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
const MSG_READY = "ãŸã ã„ã¾æº–å‚™ä¸­ã§ã™â™¡ ã‚‚ã†å°‘ã—ãŠå¾…ã¡ãã ã•ã„ï¼";

// âœ… HTMLã‚¨ã‚¹ã‚±ãƒ¼ãƒ—
const esc=s=>String(s||"").replace(/[&<>]/g,m=>({"&":"&amp;","<":"&lt;",">":"&gt;"}[m]));

// âœ… CSVèª­è¾¼
async function loadCSV(url){
  const res = await fetch(url+"&t="+Date.now());
  if(!res.ok) throw new Error(res.status);
  return await res.text();
}

// âœ… CSV â†’ é…åˆ—
function parseCSV(txt){
  return txt.split(/\r?\n/).map(r=>r.split(","));
}

// âœ… æ—¥ä»˜â†’æ›œæ—¥ä»˜åŠ 
function fmtDateJP(s){
  const m=s.match(/(\d{1,2})[\/æœˆ.-](\d{1,2})/);
  if(!m) return s;
  const [_,M,D]=m;
  const y=new Date().getFullYear();
  const dt=new Date(`${y}/${M}/${D}`);
  const wd=["æ—¥","æœˆ","ç«","æ°´","æœ¨","é‡‘","åœŸ"][dt.getDay()];
  return `${M}/${D}(${wd})`;
}

// âœ… ãŠçŸ¥ã‚‰ã›æç”»
async function renderNews(){
  try{
    const csv=await loadCSV(CONFIG.news);
    const rows=parseCSV(csv).slice(1).filter(r=>r[0]||r[2]);
    if(rows.length===0){
      newsStatus.textContent=MSG_READY;
      newsStatus.style.display="block";
      return;
    }
    newsList.innerHTML = rows.map(r=>{
      return `<li><time>${esc(r[0])}</time> ${esc(r[2])}</li>`;
    }).join("");
    newsStatus.style.display="none";
  }catch(e){
    newsStatus.textContent="èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸâ€¦";
    newsStatus.style.display="block";
  }
}

// âœ… ã‚¤ãƒ™ãƒ³ãƒˆæç”»
async function renderEvents(){
  try{
    const csv=await loadCSV(CONFIG.events);
    const rows=parseCSV(csv).slice(1).filter(r=>r[0]||r[2]);
    if(rows.length===0){
      eventsStatus.textContent=MSG_READY;
      eventsStatus.style.display="block";
      return;
    }
    eventsGrid.innerHTML = rows.map(r=>{
      return `<article class="card"><img src="${r[2]}" alt=""><div class="body"><h3>${esc(r[0])}</h3><p>${esc(r[1])}</p></div></article>`;
    }).join("");
    eventsStatus.style.display="none";
  }catch{
    eventsStatus.textContent="èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸâ€¦";
    eventsStatus.style.display="block";
  }
}

// âœ… ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«æç”»ï¼ˆç›´è¿‘7æ—¥é–“ï¼‰
async function renderSchedule(){
  try{
    const csv=await loadCSV(CONFIG.schedule);
    const rows=parseCSV(csv).slice(1);
    const today=new Date(); today.setHours(0,0,0,0);
    const limit=new Date(today); limit.setDate(limit.getDate()+7);
    const list=rows.filter(r=>{
      const d=new Date(r[0]); d.setHours(0,0,0,0);
      return d>=today && d<=limit;
    });

    if(list.length===0){
      scheduleStatus.textContent=MSG_READY;
      scheduleStatus.style.display="block";
      scheduleBody.innerHTML="";
      return;
    }

    scheduleBody.innerHTML = list.map(r=>
      `<tr><td>${fmtDateJP(r[0])}</td><td>${esc(r[1])}</td><td>${esc(r[2])}</td></tr>`
    ).join("");
    scheduleStatus.style.display="none";
  }catch{
    scheduleStatus.textContent="èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸâ€¦";
    scheduleStatus.style.display="block";
  }
}

document.addEventListener("DOMContentLoaded",()=>{
  renderNews();
  renderEvents();
  renderSchedule();
});
</script>

</body>
</html>
